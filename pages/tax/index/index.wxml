<view class="page">
  <view class="card">
    <view class="title">工资薪金（按月）</view>

    <view class="row">
      <text class="label">税前月薪(元)</text>
      <input class="ipt" type="digit" placeholder="如 12000" bindinput="onSalary" value="{{salary}}" />
    </view>

    <view class="row">
      <text class="label">五险一金</text>
      <radio-group class="radios" bindchange="onInsMode">
        <label class="radio"><radio value="amount" checked="{{insMode==='amount'}}" />按金额</label>
        <label class="radio"><radio value="percent" checked="{{insMode==='percent'}}" />按比例</label>
      </radio-group>
    </view>

    <view wx:if="{{insMode==='amount'}}" class="row">
      <text class="label">金额(元/月)</text>
      <input class="ipt" type="digit" placeholder="如 2500" bindinput="onInsAmount" value="{{insAmount}}" />
    </view>

    <view wx:if="{{insMode==='percent'}}" class="row">
      <text class="label">比例(%)</text>
      <input class="ipt" type="digit" placeholder="如 12（默认按月薪为基数）" bindinput="onInsPercent" value="{{insPercent}}" />
    </view>

    <view class="row">
      <text class="label">专项附加扣除</text>
      <input class="ipt" type="digit" placeholder="每月合计(元)，如 1500" bindinput="onExtra" value="{{extraDeduct}}" />
    </view>

    <view class="row">
      <text class="label">标准扣除</text>
      <input class="ipt" type="digit" placeholder="默认 5000" bindinput="onStd" value="{{stdDeduct}}" />
    </view>

    <view class="btns">
      <button type="primary" bindtap="calcMonth">计算月度个税</button>
      <button style="margin-left:20rpx" bindtap="resetAll">重置</button>
    </view>
  </view>

  <view wx:if="{{monthDone}}" class="card">
    <view class="title">月度结果</view>
    <view class="kv"><text>应纳税所得额</text><text class="v">{{taxableStr}} 元</text></view>
    <view class="kv"><text>适用税率</text><text class="v">{{ratePercent}}%（速算扣除数 {{quick}}）</text></view>
    <view class="kv"><text>本月个税</text><text class="v">{{taxStr}} 元</text></view>
    <view class="kv"><text>税后到手</text><text class="v">{{afterStr}} 元</text></view>
  </view>

  <view class="card">
    <view class="title">年终奖（可选）</view>
    <view class="row">
      <text class="label">年终奖(元)</text>
      <input class="ipt" type="digit" placeholder="如 30000" bindinput="onBonus" value="{{bonus}}" />
    </view>
    <view class="btns">
      <button type="primary" bindtap="calcBonus">计算年终奖个税</button>
    </view>
  </view>

  <view wx:if="{{bonusDone}}" class="card">
    <view class="title">年终奖结果</view>

    <view class="subTitle">方案A：单独计税（年终奖÷12确定税率）</view>
    <view class="kv"><text>适用税率</text><text class="v">{{bonusRateAPercent}}%（速算 {{bonusQuickA}}）</text></view>
    <view class="kv"><text>年终奖个税</text><text class="v">{{bonusTaxAStr}} 元</text></view>
    <view class="kv"><text>到手金额</text><text class="v">{{bonusAfterAStr}} 元</text></view>

    <view class="divider"></view>

    <view class="subTitle">方案B：并入当月工资计税（与工资合并后计算差额）</view>
    <view class="kv"><text>并入额外个税</text><text class="v">{{bonusTaxBStr}} 元</text></view>
    <view class="kv"><text>到手金额</text><text class="v">{{bonusAfterBStr}} 元</text></view>

    <view class="tips">注：税率表按常见口径（3%~45%，速算扣除 0/210/1410/2660/4410/7160/15160）。政策可能调整，请以税务机关口径为准。</view>
  </view>
</view>
